(this["webpackJsonpxtream-player"]=this["webpackJsonpxtream-player"]||[]).push([[0],{16:function(e,t,a){e.exports={container:"StreamMenu_container__P5OV4","live-player":"StreamMenu_live-player__203yB",livePlayer:"StreamMenu_live-player__203yB",navigation:"StreamMenu_navigation__1sPKD","category-container":"StreamMenu_category-container__3US_q",categoryContainer:"StreamMenu_category-container__3US_q","channel-container":"StreamMenu_channel-container__3MMBX",channelContainer:"StreamMenu_channel-container__3MMBX","player-container":"StreamMenu_player-container__279YM",playerContainer:"StreamMenu_player-container__279YM",player:"StreamMenu_player__3Qep4","epg-disabled":"StreamMenu_epg-disabled__XPXqp",epgDisabled:"StreamMenu_epg-disabled__XPXqp",epg:"StreamMenu_epg__2ebTv"}},17:function(e,t,a){e.exports={"channel-table-container":"styles_channel-table-container__jDpIv",channelTableContainer:"styles_channel-table-container__jDpIv",channelTable:"styles_channelTable__2-Q73",channel:"styles_channel__N0nGz",active:"styles_active__Yaf-H",title:"styles_title__N2fDY",logo:"styles_logo__B6EDP",movie:"styles_movie__2N9jw"}},27:function(e,t,a){e.exports={header:"Header_header__2OxAW",title:"Header_title__Wr8bA",actions:"Header_actions__jrLcL",action:"Header_action__CYpHA"}},31:function(e,t,a){e.exports={categories:"CategoriesList_categories__8WDjD",category:"CategoriesList_category__2GYS1",active:"CategoriesList_active__1wJ_X"}},49:function(e,t,a){e.exports={"clappr-player":"ClapprPlayer_clappr-player__tWuoS",clapprPlayer:"ClapprPlayer_clappr-player__tWuoS"}},55:function(e,t,a){},8:function(e,t,a){e.exports={login:"Login_login__2l8AC",form:"Login_form__1SLbs",field:"Login_field__42JpT",title:"Login_title__2UEVA",input:"Login_input__2lNlX",url:"Login_url__3yMC_",user:"Login_user__3960x",pass:"Login_pass__I4n24","auth-btn":"Login_auth-btn__1_7w7",authBtn:"Login_auth-btn__1_7w7"}},83:function(e,t,a){"use strict";a.r(t);var r=a(0),n=(a(55),a(1)),s=a.n(n),i=a(28),c=a.n(i),o=a(2),u=a.n(o),l=a(7),p=a(5),h=a(6),d=a(9),v=a(10),m=a(20),f=a(19),b=a(16),j=a.n(b),y=a(17),g=a.n(y),_=a(18),O=a(15),x=a.n(O),S=a.p+"static/media/tv-solid.4be3af6c.svg",k=function(e){Object(d.a)(a,e);var t=Object(v.a)(a);function a(e,r){var n;return Object(p.a)(this,a),(n=t.call(this,e,r)).state={iconError:!1},n}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e){e.stream!==this.props.stream&&this.setState({iconError:!1})}},{key:"shouldComponentUpdate",value:function(e){return e.stream.streamId!==this.props.stream.streamId||e.active!==this.props.active}},{key:"render",value:function(){var e=this,t=this.className,a=this.props,n=this.icon,s=a.stream,i=a.onClick;return Object(r.jsxs)("button",{className:t,onClick:i,children:[Object(r.jsx)("div",{className:g.a.logo,children:Object(r.jsx)("img",{src:n,alt:s.name,onError:function(){return e.setState({iconError:!0})}})}),Object(r.jsx)("label",{className:g.a.title,children:s.name})]},s.streamId)}},{key:"className",get:function(){var e;return x()(g.a.channel,(e={},Object(m.a)(e,g.a.active,this.props.active),Object(m.a)(e,g.a.movie,"movie"===this.props.stream.streamType),e))}},{key:"icon",get:function(){return this.state.iconError?S:this.props.stream.streamIcon?this.props.stream.streamIcon:S}}]),a}(n.Component),C=function(e){Object(d.a)(a,e);var t=Object(v.a)(a);function a(e,r){var n;return Object(p.a)(this,a),(n=t.call(this,e,r)).shouldComponentUpdate=n.shouldComponentUpdate.bind(Object(f.a)(n)),n}return Object(h.a)(a,[{key:"shouldComponentUpdate",value:function(e){var t=e.activeStreamId,a=e.streams;return t===this.props.activeStreamId?Object(_.difference)(this.props.streams,a).length>0:-1!==Object(_.findIndex)(a,["streamId",t])||-1!==Object(_.findIndex)(this.props.streams,["streamId",this.props.activeStreamId])}},{key:"render",value:function(){var e=this,t=this.props,a=t.streams,n=t.setStream,s=t.activeStreamId;return Object(r.jsx)("tr",{children:a.map((function(t){return Object(r.jsx)("td",{style:e.cellStyle,children:Object(r.jsx)(k,{stream:t,onClick:function(){return n(t)},active:s===t.streamId})})}))})}},{key:"cellStyle",get:function(){var e=(100/this.props.rowSize).toFixed(0)+"%";return{width:e,minWidth:e,maxWidth:e}}}]),a}(n.Component);function w(e){var t=e.streams,a=e.activeStreamId,n=e.rowSize,s=e.setStream,i=Object(_.chunk)(t,n);return Object(r.jsx)("div",{className:g.a.channelTableContainer,children:Object(r.jsx)("table",{className:g.a.channelTable,cellPadding:0,cellSpacing:0,children:Object(r.jsx)("tbody",{children:i.map((function(e,t){return Object(r.jsx)(C,{streams:e,activeStreamId:a,setStream:s,rowSize:n},t)}))})})})}var I=a(31),N=a.n(I),M=function(e){Object(d.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"shouldComponentUpdate",value:function(e){return e.categories!==this.props.categories||e.activeCategoryId!==this.props.activeCategoryId}},{key:"render",value:function(){var e=this.props,t=e.categories,a=e.activeCategoryId,n=e.setCategory;function s(e){return x()(N.a.category,Object(m.a)({},N.a.active,a===e))}return Object(r.jsx)("div",{className:N.a.categories,children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("button",{className:s(null),onClick:function(){return n(null)},children:"Todos"}),t.map((function(e){return Object(r.jsx)("button",{className:s(e.categoryId),onClick:function(){return n(e)},children:e.categoryName},e.categoryId)}))]})})}}]),a}(n.Component),A=a(25),L=a(27),D=a.n(L);function P(e){var t=e.title,a=e.actions;e.onAction;return Object(r.jsxs)("header",{className:D.a.header,children:[Object(r.jsx)("h1",{className:D.a.title,children:t}),Object(r.jsx)("div",{className:D.a.actions,children:a.map((function(e){return Object(r.jsx)(A.b,{className:D.a.action,to:e.path,children:e.text},e.key)}))})]})}var U=a(48),E=a.n(U),T=a(49),q=a.n(T),B=function(e){Object(d.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).player=void 0,e}return Object(h.a)(a,[{key:"shouldComponentUpdate",value:function(e){return e.source!==this.props.source}},{key:"componentDidUpdate",value:function(){var e,t,a=this.wrapper,r=this.props.source,n=this.player,s=a.querySelector("video");n&&(null===(e=s)||void 0===e||e.pause(),null===(t=n)||void 0===t||t.destroy(),n=null,s=null);if(r){var i;(n=new E.a.Player({source:r})).attachTo(a),n.play(),null===(i=s=a.querySelector("video"))||void 0===i||i.play();var c=a.querySelector("[data-player]");c.style.height="100%",c.style.width="100%"}this.player=n}},{key:"render",value:function(){return Object(r.jsx)("div",{className:q.a.clapprPlayer})}},{key:"wrapper",get:function(){return c.a.findDOMNode(this)}}]),a}(n.Component),V=function(e){Object(d.a)(a,e);var t=Object(v.a)(a);function a(e,r){var n;return Object(p.a)(this,a),(n=t.call(this,e,r)).state={filteredStreams:e.streams,activeCategory:null,activeStream:null},n.setCategory=n.setCategory.bind(Object(f.a)(n)),n.setStream=n.setStream.bind(Object(f.a)(n)),n}return Object(h.a)(a,[{key:"setCategory",value:function(e){var t=this.props.streams;e&&(t=t.category(e)),this.setState({activeCategory:e,filteredStreams:t})}},{key:"setStream",value:function(e){this.setState({activeStream:e})}},{key:"render",value:function(){var e=this.props,t=this.state,a=this.setCategory,n=this.setStream,s=this.activeCategoryId,i=this.activeStreamId,c=this.activeStreamUrl,o=e.categories,u=e.headerActions,l=e.disableEpg,p=t.filteredStreams;return Object(r.jsxs)("div",{className:j.a.container,children:[Object(r.jsx)(P,{title:"TV Ao Vivo",actions:u,onAction:function(e){return console.log(e)}}),Object(r.jsxs)("div",{className:j.a.livePlayer,children:[Object(r.jsxs)("nav",{className:j.a.navigation,children:[Object(r.jsx)("div",{className:j.a.categoryContainer,children:Object(r.jsx)(M,{categories:o,setCategory:a,activeCategoryId:s})}),Object(r.jsx)("div",{className:j.a.channelContainer,children:Object(r.jsx)(w,{streams:p,rowSize:3,setStream:n,activeStreamId:i})})]}),Object(r.jsxs)("div",{className:x()(j.a.playerContainer,Object(m.a)({},j.a.epgDisabled,l)),children:[Object(r.jsx)("div",{className:j.a.player,children:Object(r.jsx)(B,{source:c,onError:function(){return null}})}),l?null:Object(r.jsx)("div",{className:j.a.epg,children:Object(r.jsx)("p",{children:"Guia de programa\xe7\xe3o indispon\xedvel"})})]})]})]})}},{key:"activeCategoryId",get:function(){var e;return(null===(e=this.state.activeCategory)||void 0===e?void 0:e.categoryId)||null}},{key:"activeStreamId",get:function(){var e;return(null===(e=this.state.activeStream)||void 0===e?void 0:e.streamId)||null}},{key:"activeStreamUrl",get:function(){var e=this.state.activeStream,t=this.props.apiService;return e?t.makeStreamUrl(e):""}}]),a}(n.Component);function X(e){var t=e.apiService,a=e.database;return Object(r.jsx)(V,{apiService:t,categories:a.live.categories,streams:a.live.streams,headerActions:[{key:"vod",text:"filmes",path:"/movies"},{key:"series",text:"S\xe9ries",path:"/movies"}]})}var W=a(3),H=a(51),J=a(52),Y=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(p.a)(this,e),this.loaded=void 0,this.suffix=void 0,this.storage=void 0,this.loaded=[],this.suffix=a,this.storage=t}return Object(h.a)(e,[{key:"get",value:function(e,t){return this.loaded.includes(t)||(e[t]=this.getItem(t),this.loaded.push(t)),e[t]}},{key:"set",value:function(e,t,a){return e[t]=a,this.setItem(t,a)}},{key:"key",value:function(e){return"".concat(this.suffix,":").concat(e)}},{key:"getItem",value:function(e){var t=this.key(e),a=this.storage.getItem(t)||"null";return JSON.parse(a)}},{key:"setItem",value:function(e,t){var a=this.key(e);return this.storage.setItem(a,JSON.stringify(t)),!0}}]),e}();function z(e,t,a){return new Proxy(a,new Y(e,t))}var F=a(50),G=a.n(F);function Q(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e.replace(/(_\w)/g,(function(e){return e[1].toUpperCase()})):e.replace(/([^A-Z][A-Z0-9])/g,(function(e){return"".concat(e[0],"_").concat(e[1].toLowerCase())}))}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map((function(e){return Z(e,t)}));if(e.constructor!=={}.constructor)return e;var a={};for(var r in e)a[Q(r,t)]=Z(e[r],t);return a}var K=function(){function e(t){Object(p.a)(this,e),this.credentials=void 0,this.credentials=t}return Object(h.a)(e,[{key:"path",value:function(e){return"".concat(this.url,"/").concat(e)}},{key:"make",value:function(){var e=Object(l.a)(u.a.mark((function e(t,a){var r,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get(this.path(t),{params:{username:this.username,password:this.password,action:a}});case 2:if(r=e.sent,n=r.status,s=r.data,200===n){e.next=7;break}throw new Error("Erro");case 7:return e.abrupt("return",Z(s,!0));case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"url",get:function(){return this.credentials.url}},{key:"username",get:function(){return this.credentials.username}},{key:"password",get:function(){return this.credentials.password}}]),e}(),R=function(e){Object(d.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"category",value:function(e){return this.filter((function(t){return t.categoryId===e.categoryId}))}}],[{key:"fromArray",value:function(e){var t=new a;return t.push.apply(t,Object(H.a)(e)),t}}]),a}(Object(J.a)(Array)),$=function(){function e(){Object(p.a)(this,e),this.credentials=void 0,this.requestMaker=void 0,this.storage=void 0,this.info=null,this.credentials=z(localStorage,"crd",{url:"",username:"",password:""}),this.requestMaker=new K(this.credentials),this.storage=z(localStorage,"sch",{updatedAt:0,liveCategories:[],liveStreams:[],vodCategories:[],vodStreams:[],epg:null})}return Object(h.a)(e,[{key:"authenticated",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.info){e.next=3;break}return e.next=3,this.loadServerInfo();case 3:return e.abrupt("return",1===Object(_.get)(this.info,"userInfo.auth"));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentials",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.info=null,Object.assign(this.credentials,t),e.next=4,this.authenticated();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"database",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Date.now()-this.storage.updatedAt>1e7)){e.next=3;break}return e.next=3,this.sync();case 3:return e.abrupt("return",{live:{categories:this.storage.liveCategories,streams:R.fromArray(this.storage.liveStreams),epg:this.storage.epg},vod:{categories:this.storage.vodCategories,streams:R.fromArray(this.storage.vodStreams)}});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sync",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.syncLiveCategories(),this.syncLiveStreams(),this.syncVodCategories(),this.syncVodStreams()]);case 3:this.storage.updatedAt=Date.now(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"makeStreamUrl",value:function(e){var t=this.credentials,a=t.url,r=t.username,n=t.password;switch(e.streamType){case"live":return"".concat(a,"/live/").concat(r,"/").concat(n,"/").concat(e.streamId,".m3u8");case"movie":return"".concat(a,"/movie/").concat(r,"/").concat(n,"/").concat(e.streamId,".mp4");default:throw new Error("Invalid stream type")}}},{key:"loadServerInfo",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.credentials.url){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.make("player_api.php");case 4:this.info=e.sent;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"syncVodStreams",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.make("player_api.php","get_vod_streams");case 2:this.storage.vodStreams=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"syncVodCategories",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.make("player_api.php","get_vod_categories");case 2:this.storage.vodCategories=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"syncLiveStreams",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.make("player_api.php","get_live_streams");case 2:this.storage.liveStreams=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"syncLiveCategories",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.make("player_api.php","get_live_categories");case 2:this.storage.liveCategories=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"make",value:function(e,t){return this.requestMaker.make(e,t)}}]),e}();function ee(e){var t=e.apiService,a=e.database;return Object(r.jsx)(V,{disableEpg:!0,apiService:t,categories:a.vod.categories,streams:a.vod.streams,headerActions:[{key:"live",text:"LiveTV",path:"/livetv"},{key:"series",text:"S\xe9ries",path:"/livetv"}]})}var te=a(32),ae=a(8),re=a.n(ae);function ne(e){var t=e.apiService,a=e.onAuthenticated,s=Object(n.useState)(""),i=Object(te.a)(s,2),c=i[0],o=i[1],p=Object(n.useState)(""),h=Object(te.a)(p,2),d=h[0],v=h[1],m=Object(n.useState)(""),f=Object(te.a)(m,2),b=f[0],j=f[1];function y(){return(y=Object(l.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,t.setCredentials({url:c,username:d,password:b});case 4:if(e.sent){e.next=8;break}return alert("Os dados de autentica\xe7\xe3o s\xe3o inv\xe1lidos."),e.abrupt("return",!1);case 8:a(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),alert(e.t0.message);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return Object(r.jsx)("div",{className:re.a.login,children:Object(r.jsxs)("form",{className:re.a.form,onSubmit:function(e){return y.apply(this,arguments)},children:[Object(r.jsxs)("div",{className:x()(re.a.field,re.a.url),children:[Object(r.jsx)("label",{className:re.a.title,children:"Url"}),Object(r.jsx)("input",{className:re.a.input,value:c,onChange:function(e){return o(e.target.value)}})]}),Object(r.jsxs)("div",{className:x()(re.a.field,re.a.user),children:[Object(r.jsx)("label",{className:re.a.title,children:"Username"}),Object(r.jsx)("input",{className:re.a.input,value:d,onChange:function(e){return v(e.target.value)}})]}),Object(r.jsxs)("div",{className:x()(re.a.field,re.a.pass),children:[Object(r.jsx)("label",{className:re.a.title,children:"Password"}),Object(r.jsx)("input",{className:re.a.input,value:b,onChange:function(e){return j(e.target.value)}})]}),Object(r.jsx)("button",{className:re.a.authBtn,children:"Entrar"})]})})}var se=function(e){Object(d.a)(a,e);var t=Object(v.a)(a);function a(e,r){var n;return Object(p.a)(this,a),(n=t.call(this,e,r)).dbService=void 0,n.dbService=new $,n.state={ready:!1,authenticated:!1,database:null},n}return Object(h.a)(a,[{key:"loadDatabase",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.dbService.database();case 3:e.t1=e.sent,e.t2={database:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.dbService.authenticated();case 3:e.t1=e.sent,e.t2={ready:!0,authenticated:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.ready,n=t.authenticated,s=t.database;return a?n?s?Object(r.jsx)(A.a,{children:Object(r.jsxs)(W.d,{children:[Object(r.jsx)(W.b,{path:"/livetv",children:Object(r.jsx)(X,{apiService:this.dbService,database:s})}),Object(r.jsx)(W.b,{path:"/movies",children:Object(r.jsx)(ee,{apiService:this.dbService,database:s})}),Object(r.jsx)(W.a,{to:"/livetv"})]})}):(this.loadDatabase(),Object(r.jsx)("div",{children:"Loading database..."})):Object(r.jsxs)(A.a,{children:[Object(r.jsx)(W.a,{to:"/login"}),Object(r.jsx)(W.b,{path:"/login",children:Object(r.jsx)(ne,{apiService:this.dbService,onAuthenticated:function(){return e.componentDidMount()}})})]}):null}}]),a}(n.PureComponent),ie=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,84)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),r(e),n(e),s(e),i(e)}))};c.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(se,{})}),document.getElementById("root")),ie()}},[[83,1,2]]]);
//# sourceMappingURL=main.421f928e.chunk.js.map